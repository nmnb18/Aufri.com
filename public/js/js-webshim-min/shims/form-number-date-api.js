jQuery.webshims.register("form-number-date-api",function(e,t,i,n,a,r){"use strict";t.addInputType||t.error("you can not call forms-ext feature after calling forms feature. call both at once instead: $.webshims.polyfill('forms forms-ext')"),t.getStep||(t.getStep=function(t,i){var n=e.attr(t,"step");return"any"===n?n:(i=i||p(t),s[i]&&s[i].step?(n=y.number.asNumber(n),(!isNaN(n)&&n>0?n:s[i].step)*(s[i].stepScaleFactor||1)):n)}),t.addMinMaxNumberToCache||(t.addMinMaxNumberToCache=function(e,t,i){e+"AsNumber"in i||(i[e+"AsNumber"]=s[i.type].asNumber(t.attr(e)),isNaN(i[e+"AsNumber"])&&e+"Default"in s[i.type]&&(i[e+"AsNumber"]=s[i.type][e+"Default"]))});var o=parseInt("NaN",10),s=t.inputTypes,u=function(e){return"number"==typeof e||e&&e==1*e},l=function(t){return e('<input type="'+t+'" />').prop("type")===t},p=function(e){return(e.getAttribute("type")||"").toLowerCase()},c=function(e){return e&&!isNaN(1*e)},d=t.addMinMaxNumberToCache,h=function(e,t){e=""+e,t-=e.length;for(var i=0;t>i;i++)e="0"+e;return e},m=1e-7,f=t.bugs.bustedValidity;t.addValidityRule("stepMismatch",function(e,i,n,a){if(""===i)return!1;"type"in n||(n.type=p(e[0]));var r,o=(a||{}).stepMismatch||!1;if(s[n.type]&&s[n.type].step){if("step"in n||(n.step=t.getStep(e[0],n.type)),"any"==n.step)return!1;if("valueAsNumber"in n||(n.valueAsNumber=s[n.type].asNumber(i)),isNaN(n.valueAsNumber))return!1;d("min",e,n),r=n.minAsNumber,isNaN(r)&&(r=s[n.type].stepBase||0),o=Math.abs((n.valueAsNumber-r)%n.step),o=!(m>=o||m>=Math.abs(o-n.step))}return o}),[{name:"rangeOverflow",attr:"max",factor:1},{name:"rangeUnderflow",attr:"min",factor:-1}].forEach(function(e){t.addValidityRule(e.name,function(t,i,n,a){var r=(a||{})[e.name]||!1;if(""===i)return r;if("type"in n||(n.type=p(t[0])),s[n.type]&&s[n.type].asNumber){if("valueAsNumber"in n||(n.valueAsNumber=s[n.type].asNumber(i)),isNaN(n.valueAsNumber))return!1;if(d(e.attr,t,n),isNaN(n[e.attr+"AsNumber"]))return r;r=n[e.attr+"AsNumber"]*e.factor<n.valueAsNumber*e.factor-m}return r})}),t.reflectProperties(["input"],["max","min","step"]);var v=t.defineNodeNameProperty("input","valueAsNumber",{prop:{get:function(){var t=this,i=p(t),n=s[i]&&s[i].asNumber?s[i].asNumber(e.prop(t,"value")):v.prop._supget&&v.prop._supget.apply(t,arguments);return null==n&&(n=o),n},set:function(i){var n=this,r=p(n);if(s[r]&&s[r].numberToString){if(isNaN(i))return e.prop(n,"value",""),a;var o=s[r].numberToString(i);o!==!1?e.prop(n,"value",o):t.error("INVALID_STATE_ERR: DOM Exception 11")}else v.prop._supset&&v.prop._supset.apply(n,arguments)}}}),g=t.defineNodeNameProperty("input","valueAsDate",{prop:{get:function(){var t=this,i=p(t);return s[i]&&s[i].asDate&&!s[i].noAsDate?s[i].asDate(e.prop(t,"value")):g.prop._supget&&g.prop._supget.call(t)||null},set:function(i){var n=this,r=p(n);if(!s[r]||!s[r].dateToString||s[r].noAsDate)return g.prop._supset&&g.prop._supset.apply(n,arguments)||null;if(null===i)return e.prop(n,"value",""),"";var o=s[r].dateToString(i);return o!==!1?(e.prop(n,"value",o),o):(t.error("INVALID_STATE_ERR: DOM Exception 11"),a)}}});e.each({stepUp:1,stepDown:-1},function(i,n){var a=t.defineNodeNameProperty("input",i,{prop:{value:function(i){var r,o,u,l,c,d,h=p(this);if(!s[h]||!s[h].asNumber){if(a.prop&&a.prop.value)return a.prop.value.apply(this,arguments);throw t.info("no step method for type: "+h),"invalid state error"}if(d={type:h},i||(i=1,t.info("you should always use a factor for stepUp/stepDown")),i*=n,o=e.prop(this,"valueAsNumber"),isNaN(o))throw t.info("valueAsNumber is NaN can't apply stepUp/stepDown "),"invalid state error";if(r=t.getStep(this,h),"any"==r)throw t.info("step is 'any' can't apply stepUp/stepDown"),"invalid state error";if(t.addMinMaxNumberToCache("min",e(this),d),t.addMinMaxNumberToCache("max",e(this),d),r*=i,o=1*(o+r).toFixed(5),l=(o-(d.minAsNumber||0))%r,l&&Math.abs(l)>m&&(c=o-l,c+=l>0?r:-r,o=1*c.toFixed(5)),!isNaN(d.maxAsNumber)&&o>d.maxAsNumber||!isNaN(d.minAsNumber)&&d.minAsNumber>o)throw t.info("max/min overflow can't apply stepUp/stepDown"),"invalid state error";u?e.prop(this,"valueAsDate",u):e.prop(this,"valueAsNumber",o)}}})});var y={number:{mismatch:function(e){return!u(e)},step:1,stepScaleFactor:1,asNumber:function(e){return u(e)?1*e:o},numberToString:function(e){return u(e)?e:!1}},range:{minDefault:0,maxDefault:100},color:{mismatch:function(e){return e&&7==e.length&&/^\u0023/.test(e)?isNaN(parseInt(e.charAt(1)+e.charAt(2),16))||isNaN(parseInt(e.charAt(3)+e.charAt(4),16))||isNaN(parseInt(e.charAt(5)+e.charAt(6),16)):!0}},date:{mismatch:function(e){if(!e||!e.split||!/\d$/.test(e))return!0;var t,i=e.split(/\u002D/);if(3!==i.length)return!0;var n=!1;if(4>i[0].length||2!=i[1].length||i[1]>12||2!=i[2].length||i[2]>33)n=!0;else for(t=0;3>t;t++)if(!c(i[t])){n=!0;break}return n||e!==this.dateToString(this.asDate(e,!0))},step:1,stepScaleFactor:864e5,asDate:function(e,t){return!t&&this.mismatch(e)?null:new Date(this.asNumber(e,!0))},asNumber:function(e,t){var i=o;return(t||!this.mismatch(e))&&(e=e.split(/\u002D/),i=Date.UTC(e[0],e[1]-1,e[2])),i},numberToString:function(e){return u(e)?this.dateToString(new Date(1*e)):!1},dateToString:function(e){return e&&e.getFullYear?h(e.getUTCFullYear(),4)+"-"+h(e.getUTCMonth()+1,2)+"-"+h(e.getUTCDate(),2):!1}},time:{mismatch:function(t,i){if(!t||!t.split||!/\d$/.test(t))return!0;if(t=t.split(/\u003A/),2>t.length||t.length>3)return!0;var n,r=!1;return t[2]&&(t[2]=t[2].split(/\u002E/),n=parseInt(t[2][1],10),t[2]=t[2][0]),e.each(t,function(e,t){return c(t)&&2===t.length?a:(r=!0,!1)}),r?!0:t[0]>23||0>t[0]||t[1]>59||0>t[1]?!0:t[2]&&(t[2]>59||0>t[2])?!0:n&&isNaN(n)?!0:(n&&(100>n?n*=100:10>n&&(n*=10)),i===!0?[t,n]:!1)},step:60,stepBase:0,stepScaleFactor:1e3,asDate:function(e){return e=new Date(this.asNumber(e)),isNaN(e)?null:e},asNumber:function(e){var t=o;return e=this.mismatch(e,!0),e!==!0&&(t=Date.UTC("1970",0,1,e[0][0],e[0][1],e[0][2]||0),e[1]&&(t+=e[1])),t},dateToString:function(e){if(e&&e.getUTCHours){var t=h(e.getUTCHours(),2)+":"+h(e.getUTCMinutes(),2),i=e.getSeconds();return"0"!=i&&(t+=":"+h(i,2)),i=e.getUTCMilliseconds(),"0"!=i&&(t+="."+h(i,3)),t}return!1}},month:{mismatch:function(e){return y.date.mismatch(e+"-01")},step:1,stepScaleFactor:!1,asDate:function(e){return new Date(y.date.asNumber(e+"-01"))},asNumber:function(e){var t=o;return e&&!this.mismatch(e)&&(e=e.split(/\u002D/),e[0]=1*e[0]-1970,e[1]=1*e[1]-1,t=12*e[0]+e[1]),t},numberToString:function(e){var t,i=!1;return u(e)&&(t=e%12,e=(e-t)/12+1970,t+=1,1>t&&(e-=1,t+=12),i=h(e,4)+"-"+h(t,2)),i},dateToString:function(e){if(e&&e.getUTCHours){var t=y.date.dateToString(e);return t.split&&(t=t.split(/\u002D/))?t[0]+"-"+t[1]:!1}return!1}}};!f&&l("range")&&l("time")&&l("month")||(y.range=e.extend({},y.number,y.range),y.time=e.extend({},y.date,y.time),y.month=e.extend({},y.date,y.month)),["number","month","range","date","time"].forEach(function(e){(f||!l(e))&&t.addInputType(e,y[e])}),!l("color")&&r.types&&r.types.indexOf&&-1!=r.types.indexOf("color")&&t.addInputType("color",y.color),null==e("<input />").prop("labels")&&t.defineNodeNamesProperty("button, input, keygen, meter, output, progress, select, textarea","labels",{prop:{get:function(){if("hidden"==this.type)return null;var t=this.id,i=e(this).closest("label").filter(function(){var e=this.attributes["for"]||{};return!e.specified||e.value==t});return t&&(i=i.add('label[for="'+t+'"]')),i.get()},writeable:!1}})});